
{% macro filetable_menu(
    callback_on_process_all     = "",
    callback_on_cancel          = "",
    callback_on_download_all    = "",
    download_menu               = None
) %}

<div class="ui top attached menu" style="border-top-width:0px;">
    <a class="process-all item" onclick="{{ callback_on_process_all }}(event)">
        <i class="blue play icon"></i>
        Process All
    </a>
    <a class="processing item" style="display:none">
        <i class="loading spinner icon"></i>
        Processing...
    </a>
    <a class="cancel-processing item" onclick="{{ callback_on_cancel }}(event)"  style="display:none">
        <i class="red times icon"></i>
        Cancel
    </a>
    {% if download_menu -%}
        {{ download_menu | indent }}
    {% else %}
    <div class="ui simple dropdown download-all item" onclick="{{ callback_on_download_all }}(event)">
        <i class="download icon"></i>
        Download All
    </div>
    {%- endif %}
</div>
{% endmacro %}

{% macro base_main_table(extra_columns=[]) %}
<table class="ui fixed celled sortable unstackable table accordion" id="filetable" style="border:0px; margin-top:0px;">
    <thead>
      <tr>
        <th id="files-loaded-column-header">No Files Loaded</th>
        {% for item in extra_columns %}
            <th>{{ item }}</th>
        {% endfor %}
      </tr>
    </thead>
    <tbody>
        {# #filetable-row-template inserted here from javascript #}
    </tbody>
</table>
{% endmacro %}



{% macro detection_tab(
    app, 
    main_table              = base_main_table(), 
    filetable_download_menu = None
)
%}
<!-- MACRO detection_tab() START -->
{{ filetable_menu(
        callback_on_process_all  = app+".Detection.on_process_all",
        callback_on_cancel       = app+".Detection.on_cancel_processing",
        callback_on_download_all = app+".Download.on_download_all",
        download_menu            = filetable_download_menu
    ) }}
{{ main_table }}

<!-- MACRO detection_tab() END -->
{% endmacro %}