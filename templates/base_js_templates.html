{% set loading_spinner %}
<div class="loading-message" style="display:flex;justify-content: center;">
    <i class="spinner loading icon"></i>
    Loading...
</div>
{% endset %}


{% set content_menu %}
<div class="ui bottom attached secondary icon menu" style="border-top-width:0px; margin-bottom:0px;">
    <a class="item" onclick="on_process_image(event)"><i class="play icon"></i></a>

    <div class="ui simple dropdown icon item view-menu-button">
      <i class="eye icon"></i>
      <div class="menu view-menu">
        <div class="header">
          Show Results As
        </div>
        <div class="item active overlay-item" onclick="show_results_as_overlay('${filename}')">
          <i class="layer group icon"></i>
          Overlay
        </div>
        <div class="item side-by-side-item" onclick="show_results_side_by_side('${filename}')">
          <i class="columns icon"></i>
          Side-by-Side
        </div>
        <div class="divider"></div>
      </div>
    </div>

    <a class="item" onclick="console.error(event)"><i class="download icon"></i></a>
</div>
{% endset %} {# end content_menu #}




{% set filetable_content %}
<div class="filetable-content" style="display:none">
    {{ content_menu }}

    {# TODO: move styles to css file #}
    <div class="image-container stripes" style="display:flex; align-items: center; justify-content:space-around; width:100%; height:calc(100vh - 120px);">
      
        <div class="input-image-container set-aspect-ratio-manually" style="width:100%; max-width: calc( (100vh - 120px) * var(--imagewidth) / var(--imageheight) ); position: relative;"> {# width/height set in javascript #}
          <img class="input-image unselectable" style="width:100%;">
          <img class="result-image-overlay unselectable pixelated" style="position:absolute; width:100%; height:100%; left:0; top:0; filter:url(#black-to-transparent)">
        </div>

        <div class="result-image-container set-aspect-ratio-manually" style="width:100%; max-width: calc( (100vh - 120px) * var(--imagewidth) / var(--imageheight) ); display:none">
          <img class="result-image unselectable pixelated" style="width:100%; filter:contrast(0.0);">
        </div>
      
    </div>
</div>
{% endset %} {# end filetable_content #}




<template id="filetable-row-template">
    <tr class="ui title" filename="${filename}">
        <!-- table row -->
        <td>
            <i class="dropdown icon"></i>
            <label>${filename}</label>
        </td>
    </tr>
    <tr style="display:none" filename="${filename}">
        <!-- content -->
        <td class="ui content" style="padding:0px;">
            {{ loading_spinner }}
            {{ filetable_content }}
        </td>
    </tr>
</template>


{# TODO: put somewhere else #}
<svg height="0">
  <defs>
    <filter id="black-to-transparent">
      <!-- image filter to set alpha=0 where the image is black -->
      <feColorMatrix in="SourceGraphic"
          type="matrix"
          values="1 0 0 0 0
                  0 1 0 0 0
                  0 0 1 0 0
                  1 1 1 0 0" />
     </filter>

     <filter id="white-to-red">
      <feColorMatrix in="SourceGraphic"
          type="matrix"
          values="1 1 1 0 0
                  0 0 0 0 0
                  0 0 0 0 0
                  0 0 0 1 0" />
     </filter>
  </defs>
</svg>

